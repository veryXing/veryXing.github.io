<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Xing&#39;s Blog</title>
  
  
  <link href="https://veryxing.github.io/atom.xml" rel="self"/>
  
  <link href="https://veryxing.github.io/"/>
  <updated>2024-10-14T07:26:22.346Z</updated>
  <id>https://veryxing.github.io/</id>
  
  <author>
    <name>xing</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>QSS (Qt Style Sheet) 樣式設定</title>
    <link href="https://veryxing.github.io/post/2024-10-14/QSS-Qt-Style-Sheet-%E6%A8%A3%E5%BC%8F%E8%A8%AD%E5%AE%9A/"/>
    <id>https://veryxing.github.io/post/2024-10-14/QSS-Qt-Style-Sheet-%E6%A8%A3%E5%BC%8F%E8%A8%AD%E5%AE%9A/</id>
    <published>2024-10-14T07:20:13.000Z</published>
    <updated>2024-10-14T07:26:22.346Z</updated>
    
    <content type="html"><![CDATA[<p>QSS 是 PyQt6 裡用來設定元件樣式的樣式表 ( Qt Style Sheet )，使用方法和網頁 CSS 非常類似，雖然 QSS 沒有辦法像網頁 CSS 般的完整，但已經可以滿足大部分的樣式設計需求，這篇教學會介紹如何使用 QSS 設定元件樣式。</p><span id="more"></span><blockquote><p>  快速導覽：</p><ul><li><a href="https://steam.oxxostudio.tw/category/python/pyqt6/qss.html#a1">開始使用 QSS</a></li><li><a href="https://steam.oxxostudio.tw/category/python/pyqt6/qss.html#a2">常用樣式設定</a></li><li><a href="https://steam.oxxostudio.tw/category/python/pyqt6/qss.html#a3">偽狀態設定</a></li><li><a href="https://steam.oxxostudio.tw/category/python/pyqt6/qss.html#a4">子控制項設定</a></li></ul></blockquote><blockquote><p>  因為 Google Colab 不支援 PyQt6，所以請<em>使用本機環境</em> ( 參考：<a href="https://steam.oxxostudio.tw/category/python/info/virtualenv.html">使用 Python 虛擬環境</a> ) 或<em>使用 Anaconda Jupyter 進行實作</em> ( 參考：<a href="https://steam.oxxostudio.tw/category/python/info/anaconda.html">使用 Anaconda</a> )。</p></blockquote><h2 id="開始使用-QSS"><a href="#開始使用-QSS" class="headerlink" title="開始使用 QSS"></a>開始使用 QSS</h2><p>在 PyQt6 裡建立元件之後，元件會具有一個 setStyleSheet() 方法，在方法裡撰寫樣式，就會修改原本元件的樣式，例如下方的程式碼執行後，就會將 QLabel 的文字設定為 30px 的大小和紅色 ( 如果遇到多個樣式，可以使用三個單引號的方式撰寫 )。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt6 <span class="keyword">import</span> QtWidgets</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">app = QtWidgets.QApplication(sys.argv)</span><br><span class="line"></span><br><span class="line">Form = QtWidgets.QWidget()</span><br><span class="line">Form.setWindowTitle(<span class="string">&#x27;oxxo.studio&#x27;</span>)</span><br><span class="line">Form.resize(<span class="number">300</span>, <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">label = QtWidgets.QLabel(Form)</span><br><span class="line">label.setGeometry(<span class="number">10</span>,<span class="number">10</span>,<span class="number">150</span>,<span class="number">100</span>)</span><br><span class="line">label.setText(<span class="string">&#x27;HELLO&#x27;</span>)</span><br><span class="line">label.setStyleSheet(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        font-size:30px;</span></span><br><span class="line"><span class="string">        color:red;</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Form.show()</span><br><span class="line">sys.exit(app.<span class="built_in">exec</span>())</span><br></pre></td></tr></table></figure><p>class 寫法：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt6 <span class="keyword">import</span> QtWidgets</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span>(QtWidgets.QWidget):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        <span class="variable language_">self</span>.setObjectName(<span class="string">&quot;MainWindow&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.setWindowTitle(<span class="string">&#x27;oxxo.studio&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.resize(<span class="number">300</span>, <span class="number">200</span>)</span><br><span class="line">        <span class="variable language_">self</span>.ui()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ui</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.label = QtWidgets.QLabel(<span class="variable language_">self</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label.setGeometry(<span class="number">10</span>,<span class="number">10</span>,<span class="number">150</span>,<span class="number">100</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label.setText(<span class="string">&#x27;HELLO&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label.setStyleSheet(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">                font-size:30px;</span></span><br><span class="line"><span class="string">                color:red;</span></span><br><span class="line"><span class="string">            &#x27;&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app = QtWidgets.QApplication(sys.argv)</span><br><span class="line">    Form = MyWidget()</span><br><span class="line">    Form.show()</span><br><span class="line">    sys.exit(app.<span class="built_in">exec</span>())</span><br></pre></td></tr></table></figure><p><img src="/assets/qss-01-1728890756438-3.webp" alt="PyQt6 教學 - QSS ( Qt Style Sheet ) 樣式設定"></p><iframe id="aswift_1" name="aswift_1" browsingtopics="true" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="1015" height="280" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allow="attribution-reporting; run-ad-auction" src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-8629612872829139&amp;output=html&amp;h=280&amp;slotname=5100553055&amp;adk=3883188948&amp;adf=1997219739&amp;pi=t.ma~as.5100553055&amp;w=1015&amp;abgtt=6&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1728843499&amp;rafmt=1&amp;format=1015x280&amp;url=https%3A%2F%2Fsteam.oxxostudio.tw%2Fcategory%2Fpython%2Fpyqt6%2Fqss.html&amp;fwr=0&amp;fwrattr=true&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;uach=WyJXaW5kb3dzIiwiMTUuMC4wIiwieDg2IiwiIiwiMTI5LjAuMjc5Mi44OSIsbnVsbCwwLG51bGwsIjY0IixbWyJNaWNyb3NvZnQgRWRnZSIsIjEyOS4wLjI3OTIuODkiXSxbIk5vdD1BP0JyYW5kIiwiOC4wLjAuMCJdLFsiQ2hyb21pdW0iLCIxMjkuMC42NjY4LjEwMSJdXSwwXQ..&amp;dt=1728890266290&amp;bpp=1&amp;bdt=679&amp;idt=520&amp;shv=r20241009&amp;mjsv=m202410080101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie_enabled=1&amp;eoidce=1&amp;prev_fmts=0x0&amp;nras=1&amp;correlator=1280429048961&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=1&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1032&amp;u_aw=1920&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=389&amp;ady=2180&amp;biw=1897&amp;bih=920&amp;scr_x=0&amp;scr_y=0&amp;eid=44759875%2C44759926%2C44759842%2C95343853%2C31087794%2C31087803%2C31087941%2C31087987%2C95332586%2C95343455%2C95344777%2C95337195%2C31087609&amp;oid=2&amp;pvsid=4401140414253343&amp;tmod=411790395&amp;wsm=1&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fcn.bing.com%2F&amp;fc=1920&amp;brdim=0%2C0%2C0%2C0%2C1920%2C0%2C1920%2C1032%2C1912%2C920&amp;vis=1&amp;rsz=%7C%7CeEbr%7C&amp;abl=CS&amp;pfx=0&amp;fu=128&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=2&amp;uci=a!2&amp;btvi=1&amp;fsb=1&amp;dtd=524" data-google-container-id="a!2" tabindex="0" title="Advertisement" aria-label="Advertisement" data-google-query-id="CKjAt5KqjYkDFVPhFgUdp1oq0Q" data-load-complete="true" style="padding: 0px; margin: 0px; box-sizing: border-box; font-family: inherit; font-size: inherit; line-height: inherit; font-weight: inherit; left: 0px; top: 0px; border: 0px; width: 1015px; height: 280px;"></iframe><h2 id="常用樣式設定"><a href="#常用樣式設定" class="headerlink" title="常用樣式設定"></a>常用樣式設定</h2><p>下方列出一些常用的樣式 ( 完整屬性參考「<a href="https://doc.qt.io/qt-6/stylesheet-reference.html#list-of-properties">List of Properties</a>」)。</p><table><thead><tr><th>樣式</th><th>說明</th></tr></thead><tbody><tr><td>font-size</td><td>文字大小，單位 px。</td></tr><tr><td>color</td><td>文字顏色，可使用顏色名稱或色碼，例如 #f00 為紅色。</td></tr><tr><td>font-family</td><td>字體。</td></tr><tr><td>font-weight</td><td>字體粗細，可設定 normal、bold。</td></tr><tr><td>font-style</td><td>文字樣式，可設定 normal、italic、oblique。</td></tr><tr><td>spacing</td><td>文字間距，不用單位。</td></tr><tr><td>text-align</td><td>文字對齊方式，可設定 left、center、right。</td></tr><tr><td>height</td><td>元件高度，單位 px。</td></tr><tr><td>width</td><td>元件寬度，單位 px。</td></tr><tr><td>margin</td><td>元件外邊距，單位 px。</td></tr><tr><td>padding</td><td>元件內邊距，單位 px。</td></tr><tr><td>opacity</td><td>透明度，範圍 0～255，0 為透明。</td></tr><tr><td>background</td><td>背景色或背景圖，可使用顏色名稱或色碼，例如 #f00 為紅色。</td></tr><tr><td>background-color</td><td>背景色，可使用顏色名稱或色碼，例如 #f00 為紅色。</td></tr><tr><td>border</td><td>邊框，有三個值分別是 ( 粗細、樣式、顏色 )。</td></tr><tr><td>border-width</td><td>邊框寬度，單位 px。</td></tr><tr><td>border-style</td><td>邊框樣式，可設定 solid、dashed、dotted。</td></tr><tr><td>border-color</td><td>邊框顏色，可使用顏色名稱或色碼，例如 #f00 為紅色。</td></tr><tr><td>border-radius</td><td>邊框是否圓角，圓角半徑單位 px。</td></tr></tbody></table><p>樣式裡的 padding、margin、border-width、border-style、border-color 的簡單設定規則如下 ( 以 padding 為例 )：</p><table><thead><tr><th>寫法</th><th>說明</th></tr></thead><tbody><tr><td>padding:1px</td><td>上下左右都 1px。</td></tr><tr><td>padding:1px 2px</td><td>上下 1px，左右 2px。</td></tr><tr><td>padding:1px 2px 3px</td><td>上 1px，左右 2px，下 3px。</td></tr><tr><td>padding:1px 2px 3px 4px</td><td>上 1px，右 2px，下 3px，左 4px。</td></tr></tbody></table><p>如果不要一次設定 padding、margin、border、border-width、border-style、border-color，也可以加上方向的名稱單獨設定 ( 以 padding 為例 )：</p><table><thead><tr><th>樣式</th><th>說明</th></tr></thead><tbody><tr><td>padding-top</td><td>元件上方內邊距，單位 px。</td></tr><tr><td>padding-right</td><td>元件右側內邊距，單位 px。</td></tr><tr><td>padding-bottom</td><td>元件下方內邊距，單位 px。</td></tr><tr><td>padding-left</td><td>元件左側內邊距，單位 px。</td></tr></tbody></table><h2 id="偽狀態設定"><a href="#偽狀態設定" class="headerlink" title="偽狀態設定"></a>偽狀態設定</h2><p>除了設定主要樣式，QSS 也像 CSS 一樣可以設定「偽狀態」( Pseudo-States )，偽類的意思是「觸發了某些事件或進行某些行為後，才會出現的狀態」 ( 偽類會使用一個冒號開頭 )，例如「滑鼠移到按鈕上」的行為，對應的偽狀態就是「:hover」，下方列出一些常見的偽狀態 ( 完整偽狀態參考「<a href="https://doc.qt.io/qt-6/stylesheet-reference.html#list-of-pseudo-states">List of Pseudo-States</a>」 )：</p><table><thead><tr><th>偽狀態</th><th>說明</th></tr></thead><tbody><tr><td>:hover</td><td>滑鼠移上去。</td></tr><tr><td>:active</td><td>發生行為 ( 通常可能是點擊 )。</td></tr><tr><td>:focus</td><td>成為焦點 ( 通常是點擊之後 )。</td></tr><tr><td>:checked</td><td>被勾選。</td></tr><tr><td>:disabled</td><td>停用狀態。</td></tr><tr><td>:enabled</td><td>啟用狀態。</td></tr><tr><td>:selected</td><td>被選取。</td></tr></tbody></table><p>以下方的程式碼為例，執行後會設定 QPushButton 的 :hover 樣式 ( 注意需要額外使用 QPushButton:hover )，當滑鼠移動到按鈕上方時，按鈕的邊框會變粗，背景色會變成黃色。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt6 <span class="keyword">import</span> QtWidgets</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">app = QtWidgets.QApplication(sys.argv)</span><br><span class="line"></span><br><span class="line">Form = QtWidgets.QWidget()</span><br><span class="line">Form.setWindowTitle(<span class="string">&#x27;oxxo.studio&#x27;</span>)</span><br><span class="line">Form.resize(<span class="number">300</span>, <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">btn = QtWidgets.QPushButton(Form)</span><br><span class="line">btn.setGeometry(<span class="number">10</span>,<span class="number">10</span>,<span class="number">150</span>,<span class="number">100</span>)</span><br><span class="line">btn.setText(<span class="string">&#x27;HELLO&#x27;</span>)</span><br><span class="line">btn.setStyleSheet(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    QPushButton&#123;</span></span><br><span class="line"><span class="string">        border:1px solid #000;</span></span><br><span class="line"><span class="string">        background:#fff;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    QPushButton:hover&#123;</span></span><br><span class="line"><span class="string">        border:5px solid #000;</span></span><br><span class="line"><span class="string">        background:#ff0;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Form.show()</span><br><span class="line">sys.exit(app.<span class="built_in">exec</span>())</span><br></pre></td></tr></table></figure><p>class 寫法：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt6 <span class="keyword">import</span> QtWidgets</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span>(QtWidgets.QWidget):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        <span class="variable language_">self</span>.setObjectName(<span class="string">&quot;MainWindow&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.setWindowTitle(<span class="string">&#x27;oxxo.studio&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.resize(<span class="number">300</span>, <span class="number">200</span>)</span><br><span class="line">        <span class="variable language_">self</span>.ui()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ui</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.btn = QtWidgets.QPushButton(<span class="variable language_">self</span>)</span><br><span class="line">        <span class="variable language_">self</span>.btn.setGeometry(<span class="number">10</span>,<span class="number">10</span>,<span class="number">150</span>,<span class="number">100</span>)</span><br><span class="line">        <span class="variable language_">self</span>.btn.setText(<span class="string">&#x27;HELLO&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.btn.setStyleSheet(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">            QPushButton&#123;</span></span><br><span class="line"><span class="string">                border:1px solid #000;</span></span><br><span class="line"><span class="string">                background:#fff;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            QPushButton:hover&#123;</span></span><br><span class="line"><span class="string">                border:5px solid #000;</span></span><br><span class="line"><span class="string">                background:#ff0;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app = QtWidgets.QApplication(sys.argv)</span><br><span class="line">    Form = MyWidget()</span><br><span class="line">    Form.show()</span><br><span class="line">    sys.exit(app.<span class="built_in">exec</span>())</span><br></pre></td></tr></table></figure><p><img src="/assets/qss-02.webp" alt="PyQt6 教學 - QSS ( Qt Style Sheet ) 樣式設定 - 偽狀態設定"></p><iframe id="aswift_2" name="aswift_2" browsingtopics="true" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="1015" height="280" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allow="attribution-reporting; run-ad-auction" src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-8629612872829139&amp;output=html&amp;h=280&amp;slotname=5100553055&amp;adk=3883188948&amp;adf=1054259690&amp;pi=t.ma~as.5100553055&amp;w=1015&amp;abgtt=6&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1728843499&amp;rafmt=1&amp;format=1015x280&amp;url=https%3A%2F%2Fsteam.oxxostudio.tw%2Fcategory%2Fpython%2Fpyqt6%2Fqss.html&amp;fwr=0&amp;fwrattr=true&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;uach=WyJXaW5kb3dzIiwiMTUuMC4wIiwieDg2IiwiIiwiMTI5LjAuMjc5Mi44OSIsbnVsbCwwLG51bGwsIjY0IixbWyJNaWNyb3NvZnQgRWRnZSIsIjEyOS4wLjI3OTIuODkiXSxbIk5vdD1BP0JyYW5kIiwiOC4wLjAuMCJdLFsiQ2hyb21pdW0iLCIxMjkuMC42NjY4LjEwMSJdXSwwXQ..&amp;dt=1728890266291&amp;bpp=1&amp;bdt=680&amp;idt=528&amp;shv=r20241009&amp;mjsv=m202410080101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3D38a9965c6a82e4dc%3AT%3D1728890268%3ART%3D1728890268%3AS%3DALNI_MbxYzxHzgZ3_IunJeJ3kSFgX7ZM3w&amp;gpic=UID%3D00000f424206901d%3AT%3D1728890268%3ART%3D1728890268%3AS%3DALNI_MYBXXadStW0ULdwSfzpMwLThXMfVQ&amp;eo_id_str=ID%3D1262d537aa7bcef1%3AT%3D1728890268%3ART%3D1728890268%3AS%3DAA-AfjbvrVj8RKQ9fPbnsKKZZZSl&amp;prev_fmts=0x0%2C1015x280%2C300x300%2C300x300%2C1897x920%2C159x600%2C1005x124&amp;nras=4&amp;correlator=1280429048961&amp;frm=20&amp;pv=1&amp;u_tz=480&amp;u_his=1&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1032&amp;u_aw=1920&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=389&amp;ady=6313&amp;biw=1897&amp;bih=920&amp;scr_x=0&amp;scr_y=2659&amp;eid=44759875%2C44759926%2C44759842%2C95343853%2C31087794%2C31087803%2C31087941%2C31087987%2C95332586%2C95343455%2C95344777%2C95337195%2C31087609&amp;oid=2&amp;psts=AOrYGsmLrV7i5bd8gXyecuB39iNnsXZq0cIFVhpaDqYbQwyol40j5Br_v8dUl6_RsKhGWL46t3NfZ61eFcLy4EuubmVgGvg%2CAOrYGskMHngvXIGce8lEmCauUZeis0L4QxW3dQLvFHDQJIt5JK4xUHOUEcAm1UGDc41hVDeFwgMSKtep5CsjJ1YC7fl3Lmj4%2CAOrYGsl0j1w55Xruiqnt_k8slDHUegnKkOalkd-suGGrl5i2xUWzUVx73Fv-XAwBK2etDjP0GG03OYx5X73i7Yd4JacSp6DS%2CAOrYGsk3zYMfDjHmQAHjGispeGDb1MbYrATWFAT-AnxTIRTeEel2wh_uG-3jABAoaZfSbXKNEt7ZXFihaR55JrxLkuJTtuWENIEEgfDAB2Kf3DrcvjXDAA%2CAOrYGslCtkWAn3JCaTuxaVgu5q7DAinnFCJjiXnyOMEKMLZA84_0M5XXH1A-FNLiBaWYre-qQtmrtqMiGAgLhVZQSy1IG_3nV-nRJZvtNAinQutwUXa6-Q&amp;pvsid=4401140414253343&amp;tmod=411790395&amp;wsm=1&amp;uas=0&amp;nvt=1&amp;ref=https%3A%2F%2Fcn.bing.com%2F&amp;fc=1920&amp;brdim=0%2C0%2C0%2C0%2C1920%2C0%2C1920%2C1032%2C1912%2C920&amp;vis=1&amp;rsz=%7C%7CeEbr%7C&amp;abl=CS&amp;pfx=0&amp;fu=128&amp;bc=31&amp;bz=1&amp;td=1&amp;tdf=2&amp;psd=W251bGwsbnVsbCxudWxsLDNd&amp;nt=1&amp;ifi=3&amp;uci=a!3&amp;btvi=4&amp;fsb=1&amp;dtd=10124" data-google-container-id="a!3" tabindex="0" title="Advertisement" aria-label="Advertisement" data-google-query-id="CMLY-ZaqjYkDFV_IFgUdjlcj0g" data-load-complete="true" style="padding: 0px; margin: 0px; box-sizing: border-box; font-family: inherit; font-size: inherit; line-height: inherit; font-weight: inherit; left: 0px; top: 0px; border: 0px; width: 1015px; height: 280px;"></iframe><h2 id="子控制項設定"><a href="#子控制項設定" class="headerlink" title="子控制項設定"></a>子控制項設定</h2><p>在 PyQt6 裡，有些元件可能會包含其他的子控制項 ( 例如 QListWidget 列表選擇框會包含選項的子元件 )，這些子元件也可以使用對應的 QSS 語法設定樣式 ( 子控制項會使用兩個冒號開頭 )，下方列出一些常見的子元件設定方法 ( 完整子元件設定參考「<a href="https://doc.qt.io/qt-6/stylesheet-reference.html#list-of-sub-controls">List of Sub-Controls</a>」 )：</p><table><thead><tr><th>子控制項</th><th>說明</th></tr></thead><tbody><tr><td>::chunk</td><td>進度條進度。</td></tr><tr><td>::item</td><td>列表選擇框項目。</td></tr><tr><td>::groove</td><td>滑桿底線。</td></tr><tr><td>::handle</td><td>滑桿拉霸。</td></tr><tr><td>::sub-page</td><td>滑桿調整線。</td></tr></tbody></table><p>下方的程式碼執行後，會將 QSlider 數值調整滑桿更改為黑底線與紅色調整桿。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt6 <span class="keyword">import</span> QtWidgets, QtCore</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">app = QtWidgets.QApplication(sys.argv)</span><br><span class="line"></span><br><span class="line">Form = QtWidgets.QWidget()</span><br><span class="line">Form.setWindowTitle(<span class="string">&#x27;oxxo.studio&#x27;</span>)</span><br><span class="line">Form.resize(<span class="number">300</span>, <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">slider = QtWidgets.QSlider(Form)</span><br><span class="line">slider.setGeometry(<span class="number">20</span>,<span class="number">20</span>,<span class="number">200</span>,<span class="number">30</span>)</span><br><span class="line">slider.setOrientation(QtCore.Qt.Orientation.Horizontal)</span><br><span class="line">slider.setStyleSheet(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    QSlider &#123;</span></span><br><span class="line"><span class="string">        border-radius: 10px;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    QSlider::groove:horizontal &#123;</span></span><br><span class="line"><span class="string">        height: 5px;</span></span><br><span class="line"><span class="string">        background: #000;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    QSlider::handle:horizontal&#123;</span></span><br><span class="line"><span class="string">        background: #f00;</span></span><br><span class="line"><span class="string">        width: 16px;</span></span><br><span class="line"><span class="string">        height: 16px;</span></span><br><span class="line"><span class="string">        margin:-6px 0;</span></span><br><span class="line"><span class="string">        border-radius:8px;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    QSlider::sub-page:horizontal&#123;</span></span><br><span class="line"><span class="string">        background:#f90;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Form.show()</span><br><span class="line">sys.exit(app.<span class="built_in">exec</span>())</span><br></pre></td></tr></table></figure><p>class 寫法：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt6 <span class="keyword">import</span> QtWidgets, QtCore</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span>(QtWidgets.QWidget):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        <span class="variable language_">self</span>.setObjectName(<span class="string">&quot;MainWindow&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.setWindowTitle(<span class="string">&#x27;oxxo.studio&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.resize(<span class="number">300</span>, <span class="number">200</span>)</span><br><span class="line">        <span class="variable language_">self</span>.ui()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ui</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.slider = QtWidgets.QSlider(<span class="variable language_">self</span>)</span><br><span class="line">        <span class="variable language_">self</span>.slider.setGeometry(<span class="number">20</span>,<span class="number">20</span>,<span class="number">200</span>,<span class="number">30</span>)</span><br><span class="line">        <span class="variable language_">self</span>.slider.setOrientation(QtCore.Qt.Orientation.Horizontal)</span><br><span class="line">        <span class="variable language_">self</span>.slider.setStyleSheet(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">            QSlider &#123;</span></span><br><span class="line"><span class="string">                border-radius: 10px;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            QSlider::groove:horizontal &#123;</span></span><br><span class="line"><span class="string">                height: 5px;</span></span><br><span class="line"><span class="string">                background: #000;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            QSlider::handle:horizontal&#123;</span></span><br><span class="line"><span class="string">                background: #f00;</span></span><br><span class="line"><span class="string">                width: 16px;</span></span><br><span class="line"><span class="string">                height: 16px;</span></span><br><span class="line"><span class="string">                margin:-6px 0;</span></span><br><span class="line"><span class="string">                border-radius:8px;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            QSlider::sub-page:horizontal&#123;</span></span><br><span class="line"><span class="string">                background:#f90;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app = QtWidgets.QApplication(sys.argv)</span><br><span class="line">    Form = MyWidget()</span><br><span class="line">    Form.show()</span><br><span class="line">    sys.exit(app.<span class="built_in">exec</span>())</span><br></pre></td></tr></table></figure><p><img src="/assets/qss-03.webp" alt="PyQt6 教學 - QSS ( Qt Style Sheet ) 樣式設定 - 子控制項設定"></p><h2 id="注意事項"><a href="#注意事項" class="headerlink" title="注意事項"></a>注意事項</h2><p>雖然使用 QSS 可以很方便的修改樣式，但仍然有些小細節需要注意，例如 QPushButton，一旦設定了「邊框」，則必須要一併設定背景色和點擊樣式，不然其他樣式就會被清空，類似這種狀況可以參考「<a href="https://doc.qt.io/qt-6/stylesheet-reference.html">Qt Style Sheets Reference</a>」裡有特別標注「粉紅色背景」的說明。</p><p>下方的程式碼執行後，會發現本來按鈕的點擊效果，因為設定了 border 樣式而消失了。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt6 <span class="keyword">import</span> QtWidgets</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">app = QtWidgets.QApplication(sys.argv)</span><br><span class="line"></span><br><span class="line">Form = QtWidgets.QWidget()</span><br><span class="line">Form.setWindowTitle(<span class="string">&#x27;oxxo.studio&#x27;</span>)</span><br><span class="line">Form.resize(<span class="number">300</span>, <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">btn = QtWidgets.QPushButton(Form)</span><br><span class="line">btn.setGeometry(<span class="number">10</span>,<span class="number">10</span>,<span class="number">150</span>,<span class="number">100</span>)</span><br><span class="line">btn.setText(<span class="string">&#x27;HELLO&#x27;</span>)</span><br><span class="line">btn.setStyleSheet(<span class="string">&#x27;border:1px solid #000&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Form.show()</span><br><span class="line">sys.exit(app.<span class="built_in">exec</span>())</span><br></pre></td></tr></table></figure><p>class 寫法：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt6 <span class="keyword">import</span> QtWidgets, QtCore</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span>(QtWidgets.QWidget):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        <span class="variable language_">self</span>.setObjectName(<span class="string">&quot;MainWindow&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.setWindowTitle(<span class="string">&#x27;oxxo.studio&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.resize(<span class="number">300</span>, <span class="number">200</span>)</span><br><span class="line">        <span class="variable language_">self</span>.ui()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ui</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.btn = QtWidgets.QPushButton(<span class="variable language_">self</span>)</span><br><span class="line">        <span class="variable language_">self</span>.btn.setGeometry(<span class="number">10</span>,<span class="number">10</span>,<span class="number">150</span>,<span class="number">100</span>)</span><br><span class="line">        <span class="variable language_">self</span>.btn.setText(<span class="string">&#x27;HELLO&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.btn.setStyleSheet(<span class="string">&#x27;border:1px solid #000&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app = QtWidgets.QApplication(sys.argv)</span><br><span class="line">    Form = MyWidget()</span><br><span class="line">    Form.show()</span><br><span class="line">    sys.exit(app.<span class="built_in">exec</span>())</span><br></pre></td></tr></table></figure><p><img src="/assets/qss-04.webp" alt="PyQt6 教學 - QSS ( Qt Style Sheet ) 樣式設定 - 注意事項"></p><h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><p>完整 QSS 說明可以參考：<a href="https://doc.qt.io/qt-6/stylesheet-reference.html">Qt Style Sheets Reference</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;QSS 是 PyQt6 裡用來設定元件樣式的樣式表 ( Qt Style Sheet )，使用方法和網頁 CSS 非常類似，雖然 QSS 沒有辦法像網頁 CSS 般的完整，但已經可以滿足大部分的樣式設計需求，這篇教學會介紹如何使用 QSS 設定元件樣式。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>利用QML实现无边框窗体，要求可移动，可缩放</title>
    <link href="https://veryxing.github.io/post/2024-10-14/%E5%88%A9%E7%94%A8QML%E5%AE%9E%E7%8E%B0%E6%97%A0%E8%BE%B9%E6%A1%86%E7%AA%97%E4%BD%93%EF%BC%8C%E8%A6%81%E6%B1%82%E5%8F%AF%E7%A7%BB%E5%8A%A8%EF%BC%8C%E5%8F%AF%E7%BC%A9%E6%94%BE%E3%80%82/"/>
    <id>https://veryxing.github.io/post/2024-10-14/%E5%88%A9%E7%94%A8QML%E5%AE%9E%E7%8E%B0%E6%97%A0%E8%BE%B9%E6%A1%86%E7%AA%97%E4%BD%93%EF%BC%8C%E8%A6%81%E6%B1%82%E5%8F%AF%E7%A7%BB%E5%8A%A8%EF%BC%8C%E5%8F%AF%E7%BC%A9%E6%94%BE%E3%80%82/</id>
    <published>2024-10-14T04:50:04.000Z</published>
    <updated>2024-10-14T05:15:35.826Z</updated>
    
    <content type="html"><![CDATA[<p><strong>一，需求</strong></p><p>利用QML实现无边框窗体，要求可移动，可缩放。</p><p><strong>二，效果</strong></p><p><img src="/assets/ai.gif" alt="img"></p><p><strong>三，实现</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br></pre></td><td class="code"><pre><span class="line">//主窗体</span><br><span class="line"><span class="keyword">import</span> QtQuick <span class="number">2.12</span></span><br><span class="line"><span class="keyword">import</span> QtQuick.Controls <span class="number">2.3</span></span><br><span class="line"><span class="keyword">import</span> QtQuick.Window <span class="number">2.3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./widget&quot;</span></span><br><span class="line"></span><br><span class="line">Window  &#123;</span><br><span class="line">    <span class="built_in">id</span>: window</span><br><span class="line">    visible: true</span><br><span class="line">    flags: Qt.FramelessWindowHint|Qt.Window</span><br><span class="line">    width: <span class="number">1024</span></span><br><span class="line">    height: <span class="number">768</span></span><br><span class="line">    color: <span class="string">&quot;#0F1013&quot;</span></span><br><span class="line">    <span class="built_in">property</span> <span class="built_in">int</span> bw: <span class="number">3</span></span><br><span class="line"></span><br><span class="line">    //改变鼠标形状</span><br><span class="line">    MouseArea &#123;</span><br><span class="line">        anchors.fill: parent</span><br><span class="line">        hoverEnabled: true</span><br><span class="line">        cursorShape: &#123;</span><br><span class="line">            const p = Qt.point(mouseX, mouseY)</span><br><span class="line">            const b = bw + <span class="number">10</span></span><br><span class="line">            <span class="keyword">if</span> (p.x &lt; b &amp;&amp; p.y &lt; b) <span class="keyword">return</span> Qt.SizeFDiagCursor</span><br><span class="line">            <span class="keyword">if</span> (p.x &gt;= width - b &amp;&amp; p.y &gt;= height - b) <span class="keyword">return</span> Qt.SizeFDiagCursor</span><br><span class="line">            <span class="keyword">if</span> (p.x &gt;= width - b &amp;&amp; p.y &lt; b) <span class="keyword">return</span> Qt.SizeBDiagCursor</span><br><span class="line">            <span class="keyword">if</span> (p.x &lt; b &amp;&amp; p.y &gt;= height - b) <span class="keyword">return</span> Qt.SizeBDiagCursor</span><br><span class="line">            <span class="keyword">if</span> (p.x &lt; b || p.x &gt;= width - b) <span class="keyword">return</span> Qt.SizeHorCursor</span><br><span class="line">            <span class="keyword">if</span> (p.y &lt; b || p.y &gt;= height - b) <span class="keyword">return</span> Qt.SizeVerCursor</span><br><span class="line">        &#125;</span><br><span class="line">        acceptedButtons: Qt.NoButton</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    DragHandler &#123;</span><br><span class="line">        <span class="built_in">id</span>: resizeHandler</span><br><span class="line">        grabPermissions: TapHandler.TakeOverForbidden</span><br><span class="line">        target: null</span><br><span class="line">        onActiveChanged: <span class="keyword">if</span> (active) &#123;</span><br><span class="line">            const p = resizeHandler.centroid.position</span><br><span class="line">            const b = bw + <span class="number">10</span></span><br><span class="line">            let e = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (p.x &lt; b) &#123; e |= Qt.LeftEdge &#125;</span><br><span class="line">            <span class="keyword">if</span> (p.x &gt;= width - b) &#123; e |= Qt.RightEdge &#125;</span><br><span class="line">            <span class="keyword">if</span> (p.y &lt; b) &#123; e |= Qt.TopEdge &#125;</span><br><span class="line">            <span class="keyword">if</span> (p.y &gt;= height - b) &#123; e |= Qt.BottomEdge &#125;</span><br><span class="line">            window.startSystemResize(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    MyToolBar&#123;</span><br><span class="line">        window:window</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//工具栏</span><br><span class="line"><span class="keyword">import</span> QtQuick <span class="number">2.12</span></span><br><span class="line"><span class="keyword">import</span> QtQuick.Controls <span class="number">2.3</span></span><br><span class="line"><span class="keyword">import</span> QtQuick.Window <span class="number">2.3</span></span><br><span class="line"></span><br><span class="line">ToolBar &#123;</span><br><span class="line">    height: <span class="number">50</span></span><br><span class="line">    anchors.top: parent.top</span><br><span class="line">    anchors.left: parent.left</span><br><span class="line">    anchors.right: parent.right</span><br><span class="line">    x:bw</span><br><span class="line">    y:bw</span><br><span class="line"></span><br><span class="line">    <span class="built_in">property</span> var window: null</span><br><span class="line">    //关闭 最大化 最小化按钮</span><br><span class="line">    function toggleMaximized(mode) &#123;</span><br><span class="line">        <span class="keyword">if</span>(mode===<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (window.visibility === Window.Maximized) &#123;</span><br><span class="line">                window.showNormal();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                window.showMaximized();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(mode===<span class="number">1</span>)&#123;</span><br><span class="line">            window.showMinimized()</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(mode===<span class="number">2</span>)&#123;</span><br><span class="line">            window.close()</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(mode===<span class="number">4</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> window.visibility</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Rectangle&#123;</span><br><span class="line">        <span class="built_in">id</span>:rectBk</span><br><span class="line">        anchors.fill: parent</span><br><span class="line">        color: <span class="string">&quot;#1F2025&quot;</span></span><br><span class="line">        MouseArea &#123;</span><br><span class="line">            anchors.fill: parent</span><br><span class="line">            acceptedButtons: Qt.LeftButton</span><br><span class="line">            <span class="built_in">property</span> point clickPos: <span class="string">&quot;0,0&quot;</span></span><br><span class="line">            onPressed: &#123;</span><br><span class="line">                clickPos = Qt.point(mouse.x, mouse.y)</span><br><span class="line">            &#125;</span><br><span class="line">            onDoubleClicked: &#123;</span><br><span class="line">                toggleMaximized(<span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            onPositionChanged: &#123;</span><br><span class="line">                //鼠标偏移量</span><br><span class="line">                var delta = Qt.point(mouse.x-clickPos.x, mouse.y-clickPos.y)</span><br><span class="line"></span><br><span class="line">                window.setX(window.x+delta.x)</span><br><span class="line">                window.setY(window.y+delta.y)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Row&#123;</span><br><span class="line">        anchors.right: parent.right</span><br><span class="line">        anchors.top: parent.top</span><br><span class="line">        anchors.bottom: parent.bottom</span><br><span class="line">        spacing: <span class="number">0</span></span><br><span class="line">        Rectangle&#123;</span><br><span class="line">            width: <span class="number">50</span></span><br><span class="line">            height: <span class="number">50</span></span><br><span class="line">            color: Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">            Image &#123;</span><br><span class="line">                anchors.centerIn: parent</span><br><span class="line">                <span class="built_in">id</span>: <span class="built_in">min</span></span><br><span class="line">                source: <span class="string">&quot;qrc:/image/icon/minus.png&quot;</span></span><br><span class="line">                width: <span class="number">26</span></span><br><span class="line">                height: <span class="number">26</span></span><br><span class="line">            &#125;</span><br><span class="line">            MouseArea&#123;</span><br><span class="line">                anchors.fill: parent</span><br><span class="line">                hoverEnabled: true</span><br><span class="line">                onClicked: &#123;</span><br><span class="line">                    toggleMaximized(<span class="number">1</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                onEntered: &#123;</span><br><span class="line">                    parent.color = <span class="string">&quot;#454B57&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                onExited: &#123;</span><br><span class="line">                    parent.color = Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Rectangle&#123;</span><br><span class="line">            width: <span class="number">50</span></span><br><span class="line">            height: <span class="number">50</span></span><br><span class="line">            color: Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">            Image &#123;</span><br><span class="line">                <span class="built_in">id</span>: <span class="built_in">max</span></span><br><span class="line">                source: (toggleMaximized(<span class="number">4</span>) === Window.Maximized)?<span class="string">&quot;qrc:/image/icon/maximize.png&quot;</span>:<span class="string">&quot;qrc:/image/icon/maximize2.png&quot;</span></span><br><span class="line">                anchors.centerIn: parent</span><br><span class="line">                width: <span class="number">26</span></span><br><span class="line">                height: <span class="number">26</span></span><br><span class="line">            &#125;</span><br><span class="line">            MouseArea&#123;</span><br><span class="line">                anchors.fill: parent</span><br><span class="line">                hoverEnabled: true</span><br><span class="line">                onClicked: &#123;</span><br><span class="line">                    console.log(<span class="string">&quot;max&quot;</span>)</span><br><span class="line">                    toggleMaximized(<span class="number">0</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                onEntered: &#123;</span><br><span class="line">                    parent.color = <span class="string">&quot;#454B57&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">                onExited: &#123;</span><br><span class="line">                    parent.color = Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Rectangle&#123;</span><br><span class="line">            width: <span class="number">50</span></span><br><span class="line">            height: <span class="number">50</span></span><br><span class="line">            color: Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">            Image &#123;</span><br><span class="line">                <span class="built_in">id</span>: close</span><br><span class="line">                source: <span class="string">&quot;qrc:/image/icon/close.png&quot;</span></span><br><span class="line">                anchors.centerIn: parent</span><br><span class="line">                width: <span class="number">26</span></span><br><span class="line">                height: <span class="number">26</span></span><br><span class="line">            &#125;</span><br><span class="line">            MouseArea&#123;</span><br><span class="line">                anchors.fill: parent</span><br><span class="line">                hoverEnabled: true</span><br><span class="line">                onClicked: &#123;</span><br><span class="line">                    toggleMaximized(<span class="number">2</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                onEntered: &#123;</span><br><span class="line">                    parent.color = <span class="string">&quot;#454B57&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                onExited: &#123;</span><br><span class="line">                    parent.color = Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //标题</span><br><span class="line">    Text &#123;</span><br><span class="line">        <span class="built_in">id</span>:title</span><br><span class="line">        anchors.left: parent.left</span><br><span class="line">        anchors.verticalCenter:  parent.verticalCenter</span><br><span class="line">        anchors.leftMargin: <span class="number">20</span></span><br><span class="line">        color: <span class="string">&quot;#FFFFFF&quot;</span></span><br><span class="line">        font.pixelSize: <span class="number">24</span></span><br><span class="line">        text: qsTr(<span class="string">&quot;影像检测仪&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Menu &#123;</span><br><span class="line">        <span class="built_in">id</span>:settingMenu</span><br><span class="line">        x:setting.x</span><br><span class="line">        y:setting.y+setting.height+<span class="number">1</span></span><br><span class="line">        width: <span class="number">120</span></span><br><span class="line">        Action &#123;</span><br><span class="line">            text: qsTr(<span class="string">&quot;创建项目&quot;</span>)</span><br><span class="line">            onTriggered: console.log(<span class="string">&quot;创建项目&quot;</span>)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        Action &#123;</span><br><span class="line">            text: qsTr(<span class="string">&quot;编辑项目&quot;</span>)</span><br><span class="line">            onTriggered: console.log(<span class="string">&quot;编辑项目&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        delegate: MenuBarItem &#123;</span><br><span class="line">            <span class="built_in">id</span>: settingMenuItem</span><br><span class="line">            height: <span class="number">40</span></span><br><span class="line">            width: <span class="number">120</span></span><br><span class="line"></span><br><span class="line">            contentItem: Text &#123;</span><br><span class="line">                text: settingMenuItem.text</span><br><span class="line">                font.pixelSize: <span class="number">16</span></span><br><span class="line">                color:  <span class="string">&quot;#ffffff&quot;</span></span><br><span class="line">                horizontalAlignment: Text.AlignHCenter</span><br><span class="line">                verticalAlignment: Text.AlignVCenter</span><br><span class="line">                elide: Text.ElideRight</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            background: Rectangle &#123;</span><br><span class="line">                implicitWidth: <span class="number">120</span></span><br><span class="line">                implicitHeight: <span class="number">40</span></span><br><span class="line">                color: Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">                MouseArea&#123;</span><br><span class="line">                    anchors.fill: parent</span><br><span class="line">                    hoverEnabled: true</span><br><span class="line">                    propagateComposedEvents: true</span><br><span class="line">                    onClicked: &#123;</span><br><span class="line">                        settingMenu.close()</span><br><span class="line">                        settingMenuItem.action.trigger()</span><br><span class="line">                    &#125;</span><br><span class="line">                    onEntered: &#123;</span><br><span class="line">                        parent.color = <span class="string">&quot;#454B57&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    onExited: &#123;</span><br><span class="line">                        parent.color = Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        background: Rectangle &#123;</span><br><span class="line">            implicitWidth: <span class="number">150</span></span><br><span class="line">            implicitHeight: <span class="number">40</span></span><br><span class="line">            color: <span class="string">&quot;#1F2025&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //设置</span><br><span class="line">    Rectangle&#123;</span><br><span class="line">        <span class="built_in">id</span>:setting</span><br><span class="line">        anchors.top: parent.top</span><br><span class="line">        anchors.bottom: parent.bottom</span><br><span class="line">        anchors.left:title.right</span><br><span class="line">        anchors.leftMargin: <span class="number">100</span></span><br><span class="line">        color: Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">        width: <span class="number">100</span></span><br><span class="line"></span><br><span class="line">        Row&#123;</span><br><span class="line">            anchors.centerIn: parent</span><br><span class="line">            spacing: <span class="number">2</span></span><br><span class="line">            Text &#123;</span><br><span class="line">                color: <span class="string">&quot;#FFFFFF&quot;</span></span><br><span class="line">                font.pixelSize: <span class="number">20</span></span><br><span class="line">                text: qsTr(<span class="string">&quot;设置&quot;</span>)</span><br><span class="line">                verticalAlignment: Text.AlignVCenter</span><br><span class="line">                anchors.verticalCenter: parent.verticalCenter</span><br><span class="line">            &#125;</span><br><span class="line">            Image &#123;</span><br><span class="line">                width: <span class="number">32</span></span><br><span class="line">                height: <span class="number">32</span></span><br><span class="line">                anchors.verticalCenter: parent.verticalCenter</span><br><span class="line">                source: <span class="string">&quot;qrc:/image/icon/down.png&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        MouseArea&#123;</span><br><span class="line">            anchors.fill: parent</span><br><span class="line">            hoverEnabled: true</span><br><span class="line">            propagateComposedEvents: true</span><br><span class="line">            onClicked: &#123;</span><br><span class="line">                settingMenu.<span class="built_in">open</span>()</span><br><span class="line">            &#125;</span><br><span class="line">            onEntered: &#123;</span><br><span class="line">                parent.color = <span class="string">&quot;#454B57&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            onExited: &#123;</span><br><span class="line">                parent.color = Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //关于菜单</span><br><span class="line">    Menu &#123;</span><br><span class="line">        <span class="built_in">id</span>:aboutMenu</span><br><span class="line">        x:about.x</span><br><span class="line">        y:about.y+about.height+<span class="number">1</span></span><br><span class="line">        width: <span class="number">120</span></span><br><span class="line">        Action &#123;</span><br><span class="line">            text: qsTr(<span class="string">&quot;关于这个&quot;</span>)</span><br><span class="line">            onTriggered: console.log(<span class="string">&quot;关于这个&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        Action &#123;</span><br><span class="line">            text: qsTr(<span class="string">&quot;关于那个&quot;</span>)</span><br><span class="line">            onTriggered: console.log(<span class="string">&quot;关于那个&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        delegate: MenuBarItem &#123;</span><br><span class="line">            <span class="built_in">id</span>: aboutMenuItem</span><br><span class="line">            height: <span class="number">40</span></span><br><span class="line">            width: <span class="number">120</span></span><br><span class="line"></span><br><span class="line">            contentItem: Text &#123;</span><br><span class="line">                text: aboutMenuItem.text</span><br><span class="line">                font.pixelSize: <span class="number">16</span></span><br><span class="line">                color:  <span class="string">&quot;#ffffff&quot;</span></span><br><span class="line">                horizontalAlignment: Text.AlignHCenter</span><br><span class="line">                verticalAlignment: Text.AlignVCenter</span><br><span class="line">                elide: Text.ElideRight</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            background: Rectangle &#123;</span><br><span class="line">                implicitWidth: <span class="number">120</span></span><br><span class="line">                implicitHeight: <span class="number">40</span></span><br><span class="line">                color: Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">                MouseArea&#123;</span><br><span class="line">                    anchors.fill: parent</span><br><span class="line">                    hoverEnabled: true</span><br><span class="line">                    propagateComposedEvents: true</span><br><span class="line">                    onClicked: &#123;</span><br><span class="line">                        aboutMenu.close()</span><br><span class="line">                        aboutMenuItem.action.trigger()</span><br><span class="line">                    &#125;</span><br><span class="line">                    onEntered: &#123;</span><br><span class="line">                        parent.color = <span class="string">&quot;#454B57&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    onExited: &#123;</span><br><span class="line">                        parent.color = Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        background: Rectangle &#123;</span><br><span class="line">            implicitWidth: <span class="number">150</span></span><br><span class="line">            implicitHeight: <span class="number">40</span></span><br><span class="line">            color: <span class="string">&quot;#1F2025&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //关于</span><br><span class="line">    Rectangle&#123;</span><br><span class="line">        <span class="built_in">id</span>:about</span><br><span class="line">        anchors.top: parent.top</span><br><span class="line">        anchors.bottom: parent.bottom</span><br><span class="line">        anchors.left:setting.right</span><br><span class="line">        color: Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">        width: <span class="number">100</span></span><br><span class="line"></span><br><span class="line">        Row&#123;</span><br><span class="line">            anchors.centerIn: parent</span><br><span class="line">            spacing: <span class="number">2</span></span><br><span class="line">            Text &#123;</span><br><span class="line">                color: <span class="string">&quot;#FFFFFF&quot;</span></span><br><span class="line">                font.pixelSize: <span class="number">20</span></span><br><span class="line">                text: qsTr(<span class="string">&quot;关于&quot;</span>)</span><br><span class="line">                verticalAlignment: Text.AlignVCenter</span><br><span class="line">                anchors.verticalCenter: parent.verticalCenter</span><br><span class="line">            &#125;</span><br><span class="line">            Image &#123;</span><br><span class="line">                width: <span class="number">32</span></span><br><span class="line">                height: <span class="number">32</span></span><br><span class="line">                anchors.verticalCenter: parent.verticalCenter</span><br><span class="line">                source: <span class="string">&quot;qrc:/image/icon/down.png&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        MouseArea&#123;</span><br><span class="line">            anchors.fill: parent</span><br><span class="line">            hoverEnabled: true</span><br><span class="line">            propagateComposedEvents: true</span><br><span class="line">            onClicked: &#123;</span><br><span class="line">                aboutMenu.<span class="built_in">open</span>()</span><br><span class="line">            &#125;</span><br><span class="line">            onEntered: &#123;</span><br><span class="line">                parent.color = <span class="string">&quot;#454B57&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            onExited: &#123;</span><br><span class="line">                parent.color = Qt.rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;一，需求&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;利用QML实现无边框窗体，要求可移动，可缩放。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二，效果&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/assets/ai.gif&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;



&lt;p&gt;&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://veryxing.github.io/post/2024-10-14/pyqt5%20%E6%97%A0%E8%BE%B9%E6%A1%86%E7%95%8C%E9%9D%A2/"/>
    <id>https://veryxing.github.io/post/2024-10-14/pyqt5%20%E6%97%A0%E8%BE%B9%E6%A1%86%E7%95%8C%E9%9D%A2/</id>
    <published>2024-10-14T04:35:08.191Z</published>
    <updated>2024-10-13T06:25:14.004Z</updated>
    
    <content type="html"><![CDATA[<h2 id="pyqt5-无边框界面"><a href="#pyqt5-无边框界面" class="headerlink" title="pyqt5 无边框界面"></a>pyqt5 无边框界面</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QWidget, QLabel, QPushButton, QVBoxLayout</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> Qt, QPoint</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> QFont, QCursor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">QTitleLabel</span>(<span class="title class_ inherited__">QLabel</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    新建标题栏标签类</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args</span>):</span><br><span class="line">        <span class="built_in">super</span>(QTitleLabel, <span class="variable language_">self</span>).__init__(*args)</span><br><span class="line">        <span class="variable language_">self</span>.setAlignment(Qt.AlignLeft | Qt.AlignVCenter)</span><br><span class="line">        <span class="variable language_">self</span>.setFixedHeight(<span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">QTitleButton</span>(<span class="title class_ inherited__">QPushButton</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    新建标题栏按钮类</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args</span>):</span><br><span class="line">        <span class="built_in">super</span>(QTitleButton, <span class="variable language_">self</span>).__init__(*args)</span><br><span class="line">        <span class="variable language_">self</span>.setFont(QFont(<span class="string">&quot;Webdings&quot;</span>))  <span class="comment"># 特殊字体以不借助图片实现最小化最大化和关闭按钮</span></span><br><span class="line">        <span class="variable language_">self</span>.setFixedWidth(<span class="number">40</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">QUnFrameWindow</span>(<span class="title class_ inherited__">QWidget</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    无边框窗口类</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(QUnFrameWindow, <span class="variable language_">self</span>).__init__(<span class="literal">None</span>, Qt.FramelessWindowHint)  <span class="comment"># 设置为顶级窗口，无边框</span></span><br><span class="line">        <span class="variable language_">self</span>._padding = <span class="number">5</span>  <span class="comment"># 设置边界宽度为5</span></span><br><span class="line">        <span class="variable language_">self</span>.initTitleLabel()  <span class="comment"># 安放标题栏标签</span></span><br><span class="line">        <span class="variable language_">self</span>.setWindowTitle = <span class="variable language_">self</span>._setTitleText(<span class="variable language_">self</span>.setWindowTitle)  <span class="comment"># 用装饰器将设置WindowTitle名字函数共享到标题栏标签上</span></span><br><span class="line">        <span class="variable language_">self</span>.setWindowTitle(<span class="string">&quot;UnFrameWindow&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.initLayout()  <span class="comment"># 设置框架布局</span></span><br><span class="line">        <span class="variable language_">self</span>.setMinimumWidth(<span class="number">250</span>)</span><br><span class="line">        <span class="variable language_">self</span>.setMouseTracking(<span class="literal">True</span>)  <span class="comment"># 设置widget鼠标跟踪</span></span><br><span class="line">        <span class="variable language_">self</span>.initDrag()  <span class="comment"># 设置鼠标跟踪判断默认值</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initDrag</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 设置鼠标跟踪判断扳机默认值</span></span><br><span class="line">        <span class="variable language_">self</span>._move_drag = <span class="literal">False</span></span><br><span class="line">        <span class="variable language_">self</span>._corner_drag = <span class="literal">False</span></span><br><span class="line">        <span class="variable language_">self</span>._bottom_drag = <span class="literal">False</span></span><br><span class="line">        <span class="variable language_">self</span>._right_drag = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initTitleLabel</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 安放标题栏标签</span></span><br><span class="line">        <span class="variable language_">self</span>._TitleLabel = QTitleLabel(<span class="variable language_">self</span>)</span><br><span class="line">        <span class="variable language_">self</span>._TitleLabel.setMouseTracking(<span class="literal">True</span>)  <span class="comment"># 设置标题栏标签鼠标跟踪（如不设，则标题栏内在widget上层，无法实现跟踪）</span></span><br><span class="line">        <span class="variable language_">self</span>._TitleLabel.setIndent(<span class="number">10</span>)  <span class="comment"># 设置标题栏文本缩进</span></span><br><span class="line">        <span class="variable language_">self</span>._TitleLabel.move(<span class="number">0</span>, <span class="number">0</span>)  <span class="comment"># 标题栏安放到左上角</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initLayout</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 设置框架布局</span></span><br><span class="line">        <span class="variable language_">self</span>._MainLayout = QVBoxLayout()</span><br><span class="line">        <span class="variable language_">self</span>._MainLayout.setSpacing(<span class="number">0</span>)</span><br><span class="line">        <span class="variable language_">self</span>._MainLayout.addWidget(QLabel(), Qt.AlignLeft)  <span class="comment"># 顶一个QLabel在竖放框架第一行，以免正常内容挤占到标题范围里</span></span><br><span class="line">        <span class="variable language_">self</span>._MainLayout.addStretch()</span><br><span class="line">        <span class="variable language_">self</span>.setLayout(<span class="variable language_">self</span>._MainLayout)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">addLayout</span>(<span class="params">self, QLayout</span>):</span><br><span class="line">        <span class="comment"># 给widget定义一个addLayout函数，以实现往竖放框架的正确内容区内嵌套Layout框架</span></span><br><span class="line">        <span class="variable language_">self</span>._MainLayout.addLayout(QLayout)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_setTitleText</span>(<span class="params">self, func</span>):</span><br><span class="line">        <span class="comment"># 设置标题栏标签的装饰器函数</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args</span>):</span><br><span class="line">            <span class="variable language_">self</span>._TitleLabel.setText(*args)</span><br><span class="line">            <span class="keyword">return</span> func(*args)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setTitleAlignment</span>(<span class="params">self, alignment</span>):</span><br><span class="line">        <span class="comment"># 给widget定义一个setTitleAlignment函数，以实现标题栏标签的对齐方式设定</span></span><br><span class="line">        <span class="variable language_">self</span>._TitleLabel.setAlignment(alignment | Qt.AlignVCenter)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setCloseButton</span>(<span class="params">self, <span class="built_in">bool</span></span>):</span><br><span class="line">        <span class="comment"># 给widget定义一个setCloseButton函数，为True时设置一个关闭按钮</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">bool</span> == <span class="literal">True</span>:</span><br><span class="line">            <span class="variable language_">self</span>._CloseButton = QTitleButton(<span class="string">b&#x27;\xef\x81\xb2&#x27;</span>.decode(<span class="string">&quot;utf-8&quot;</span>), <span class="variable language_">self</span>)</span><br><span class="line">            <span class="variable language_">self</span>._CloseButton.setObjectName(<span class="string">&quot;CloseButton&quot;</span>)  <span class="comment"># 设置按钮的ObjectName以在qss样式表内定义不同的按钮样式</span></span><br><span class="line">            <span class="variable language_">self</span>._CloseButton.setToolTip(<span class="string">&quot;关闭窗口&quot;</span>)</span><br><span class="line">            <span class="variable language_">self</span>._CloseButton.setMouseTracking(<span class="literal">True</span>)  <span class="comment"># 设置按钮鼠标跟踪（如不设，则按钮在widget上层，无法实现跟踪）</span></span><br><span class="line">            <span class="variable language_">self</span>._CloseButton.setFixedHeight(<span class="variable language_">self</span>._TitleLabel.height())  <span class="comment"># 设置按钮高度为标题栏高度</span></span><br><span class="line">            <span class="variable language_">self</span>._CloseButton.clicked.connect(<span class="variable language_">self</span>.close)  <span class="comment"># 按钮信号连接到关闭窗口的槽函数</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setMinMaxButtons</span>(<span class="params">self, <span class="built_in">bool</span></span>):</span><br><span class="line">        <span class="comment"># 给widget定义一个setMinMaxButtons函数，为True时设置一组最小化最大化按钮</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">bool</span> == <span class="literal">True</span>:</span><br><span class="line">            <span class="variable language_">self</span>._MinimumButton = QTitleButton(<span class="string">b&#x27;\xef\x80\xb0&#x27;</span>.decode(<span class="string">&quot;utf-8&quot;</span>), <span class="variable language_">self</span>)</span><br><span class="line">            <span class="variable language_">self</span>._MinimumButton.setObjectName(<span class="string">&quot;MinMaxButton&quot;</span>)  <span class="comment"># 设置按钮的ObjectName以在qss样式表内定义不同的按钮样式</span></span><br><span class="line">            <span class="variable language_">self</span>._MinimumButton.setToolTip(<span class="string">&quot;最小化&quot;</span>)</span><br><span class="line">            <span class="variable language_">self</span>._MinimumButton.setMouseTracking(<span class="literal">True</span>)  <span class="comment"># 设置按钮鼠标跟踪（如不设，则按钮在widget上层，无法实现跟踪）</span></span><br><span class="line">            <span class="variable language_">self</span>._MinimumButton.setFixedHeight(<span class="variable language_">self</span>._TitleLabel.height())  <span class="comment"># 设置按钮高度为标题栏高度</span></span><br><span class="line">            <span class="variable language_">self</span>._MinimumButton.clicked.connect(<span class="variable language_">self</span>.showMinimized)  <span class="comment"># 按钮信号连接到最小化窗口的槽函数</span></span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton = QTitleButton(<span class="string">b&#x27;\xef\x80\xb1&#x27;</span>.decode(<span class="string">&quot;utf-8&quot;</span>), <span class="variable language_">self</span>)</span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.setObjectName(<span class="string">&quot;MinMaxButton&quot;</span>)  <span class="comment"># 设置按钮的ObjectName以在qss样式表内定义不同的按钮样式</span></span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.setToolTip(<span class="string">&quot;最大化&quot;</span>)</span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.setMouseTracking(<span class="literal">True</span>)  <span class="comment"># 设置按钮鼠标跟踪（如不设，则按钮在widget上层，无法实现跟踪）</span></span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.setFixedHeight(<span class="variable language_">self</span>._TitleLabel.height())  <span class="comment"># 设置按钮高度为标题栏高度</span></span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.clicked.connect(<span class="variable language_">self</span>._changeNormalButton)  <span class="comment"># 按钮信号连接切换到恢复窗口大小按钮函数</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_changeNormalButton</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 切换到恢复窗口大小按钮</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="variable language_">self</span>.showMaximized()  <span class="comment"># 先实现窗口最大化</span></span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.setText(<span class="string">b&#x27;\xef\x80\xb2&#x27;</span>.decode(<span class="string">&quot;utf-8&quot;</span>))  <span class="comment"># 更改按钮文本</span></span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.setToolTip(<span class="string">&quot;恢复&quot;</span>)  <span class="comment"># 更改按钮提示</span></span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.disconnect()  <span class="comment"># 断开原本的信号槽连接</span></span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.clicked.connect(<span class="variable language_">self</span>._changeMaxButton)  <span class="comment"># 重新连接信号和槽</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_changeMaxButton</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 切换到最大化按钮</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="variable language_">self</span>.showNormal()</span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.setText(<span class="string">b&#x27;\xef\x80\xb1&#x27;</span>.decode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.setToolTip(<span class="string">&quot;最大化&quot;</span>)</span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.disconnect()</span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.clicked.connect(<span class="variable language_">self</span>._changeNormalButton)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">resizeEvent</span>(<span class="params">self, QResizeEvent</span>):</span><br><span class="line">        <span class="comment"># 自定义窗口调整大小事件</span></span><br><span class="line">        <span class="variable language_">self</span>._TitleLabel.setFixedWidth(<span class="variable language_">self</span>.width())  <span class="comment"># 将标题标签始终设为窗口宽度</span></span><br><span class="line">        <span class="comment"># 分别移动三个按钮到正确的位置</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="variable language_">self</span>._CloseButton.move(<span class="variable language_">self</span>.width() - <span class="variable language_">self</span>._CloseButton.width(), <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="variable language_">self</span>._MinimumButton.move(<span class="variable language_">self</span>.width() - (<span class="variable language_">self</span>._CloseButton.width() + <span class="number">1</span>) * <span class="number">3</span> + <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="variable language_">self</span>._MaximumButton.move(<span class="variable language_">self</span>.width() - (<span class="variable language_">self</span>._CloseButton.width() + <span class="number">1</span>) * <span class="number">2</span> + <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="comment"># 重新调整边界范围以备实现鼠标拖放缩放窗口大小，采用三个列表生成式生成三个列表</span></span><br><span class="line">        <span class="variable language_">self</span>._right_rect = [QPoint(x, y) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="variable language_">self</span>.width() - <span class="variable language_">self</span>._padding, <span class="variable language_">self</span>.width() + <span class="number">1</span>)</span><br><span class="line">                            <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="variable language_">self</span>.height() - <span class="variable language_">self</span>._padding)]</span><br><span class="line">        <span class="variable language_">self</span>._bottom_rect = [QPoint(x, y) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="variable language_">self</span>.width() - <span class="variable language_">self</span>._padding)</span><br><span class="line">                             <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="variable language_">self</span>.height() - <span class="variable language_">self</span>._padding, <span class="variable language_">self</span>.height() + <span class="number">1</span>)]</span><br><span class="line">        <span class="variable language_">self</span>._corner_rect = [QPoint(x, y) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="variable language_">self</span>.width() - <span class="variable language_">self</span>._padding, <span class="variable language_">self</span>.width() + <span class="number">1</span>)</span><br><span class="line">                             <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="variable language_">self</span>.height() - <span class="variable language_">self</span>._padding, <span class="variable language_">self</span>.height() + <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mousePressEvent</span>(<span class="params">self, event</span>):</span><br><span class="line">        <span class="comment"># 重写鼠标点击的事件</span></span><br><span class="line">        <span class="keyword">if</span> (event.button() == Qt.LeftButton) <span class="keyword">and</span> (event.pos() <span class="keyword">in</span> <span class="variable language_">self</span>._corner_rect):</span><br><span class="line">            <span class="comment"># 鼠标左键点击右下角边界区域</span></span><br><span class="line">            <span class="variable language_">self</span>._corner_drag = <span class="literal">True</span></span><br><span class="line">            event.accept()</span><br><span class="line">        <span class="keyword">elif</span> (event.button() == Qt.LeftButton) <span class="keyword">and</span> (event.pos() <span class="keyword">in</span> <span class="variable language_">self</span>._right_rect):</span><br><span class="line">            <span class="comment"># 鼠标左键点击右侧边界区域</span></span><br><span class="line">            <span class="variable language_">self</span>._right_drag = <span class="literal">True</span></span><br><span class="line">            event.accept()</span><br><span class="line">        <span class="keyword">elif</span> (event.button() == Qt.LeftButton) <span class="keyword">and</span> (event.pos() <span class="keyword">in</span> <span class="variable language_">self</span>._bottom_rect):</span><br><span class="line">            <span class="comment"># 鼠标左键点击下侧边界区域</span></span><br><span class="line">            <span class="variable language_">self</span>._bottom_drag = <span class="literal">True</span></span><br><span class="line">            event.accept()</span><br><span class="line">        <span class="keyword">elif</span> (event.button() == Qt.LeftButton) <span class="keyword">and</span> (event.y() &lt; <span class="variable language_">self</span>._TitleLabel.height()):</span><br><span class="line">            <span class="comment"># 鼠标左键点击标题栏区域</span></span><br><span class="line">            <span class="variable language_">self</span>._move_drag = <span class="literal">True</span></span><br><span class="line">            <span class="variable language_">self</span>.move_DragPosition = event.globalPos() - <span class="variable language_">self</span>.pos()</span><br><span class="line">            event.accept()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mouseMoveEvent</span>(<span class="params">self, QMouseEvent</span>):</span><br><span class="line">        <span class="comment"># 判断鼠标位置切换鼠标手势</span></span><br><span class="line">        <span class="keyword">if</span> QMouseEvent.pos() <span class="keyword">in</span> <span class="variable language_">self</span>._corner_rect:</span><br><span class="line">            <span class="variable language_">self</span>.setCursor(Qt.SizeFDiagCursor)</span><br><span class="line">        <span class="keyword">elif</span> QMouseEvent.pos() <span class="keyword">in</span> <span class="variable language_">self</span>._bottom_rect:</span><br><span class="line">            <span class="variable language_">self</span>.setCursor(Qt.SizeVerCursor)</span><br><span class="line">        <span class="keyword">elif</span> QMouseEvent.pos() <span class="keyword">in</span> <span class="variable language_">self</span>._right_rect:</span><br><span class="line">            <span class="variable language_">self</span>.setCursor(Qt.SizeHorCursor)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>.setCursor(Qt.ArrowCursor)</span><br><span class="line">        <span class="comment"># 当鼠标左键点击不放及满足点击区域的要求后，分别实现不同的窗口调整</span></span><br><span class="line">        <span class="comment"># 没有定义左方和上方相关的5个方向，主要是因为实现起来不难，但是效果很差，拖放的时候窗口闪烁，再研究研究是否有更好的实现</span></span><br><span class="line">        <span class="keyword">if</span> Qt.LeftButton <span class="keyword">and</span> <span class="variable language_">self</span>._right_drag:</span><br><span class="line">            <span class="comment"># 右侧调整窗口宽度</span></span><br><span class="line">            <span class="variable language_">self</span>.resize(QMouseEvent.pos().x(), <span class="variable language_">self</span>.height())</span><br><span class="line">            QMouseEvent.accept()</span><br><span class="line">        <span class="keyword">elif</span> Qt.LeftButton <span class="keyword">and</span> <span class="variable language_">self</span>._bottom_drag:</span><br><span class="line">            <span class="comment"># 下侧调整窗口高度</span></span><br><span class="line">            <span class="variable language_">self</span>.resize(<span class="variable language_">self</span>.width(), QMouseEvent.pos().y())</span><br><span class="line">            QMouseEvent.accept()</span><br><span class="line">        <span class="keyword">elif</span> Qt.LeftButton <span class="keyword">and</span> <span class="variable language_">self</span>._corner_drag:</span><br><span class="line">            <span class="comment"># 右下角同时调整高度和宽度</span></span><br><span class="line">            <span class="variable language_">self</span>.resize(QMouseEvent.pos().x(), QMouseEvent.pos().y())</span><br><span class="line">            QMouseEvent.accept()</span><br><span class="line">        <span class="keyword">elif</span> Qt.LeftButton <span class="keyword">and</span> <span class="variable language_">self</span>._move_drag:</span><br><span class="line">            <span class="comment"># 标题栏拖放窗口位置</span></span><br><span class="line">            <span class="variable language_">self</span>.move(QMouseEvent.globalPos() - <span class="variable language_">self</span>.move_DragPosition)</span><br><span class="line">            QMouseEvent.accept()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mouseReleaseEvent</span>(<span class="params">self, QMouseEvent</span>):</span><br><span class="line">        <span class="comment"># 鼠标释放后，各扳机复位</span></span><br><span class="line">        <span class="variable language_">self</span>._move_drag = <span class="literal">False</span></span><br><span class="line">        <span class="variable language_">self</span>._corner_drag = <span class="literal">False</span></span><br><span class="line">        <span class="variable language_">self</span>._bottom_drag = <span class="literal">False</span></span><br><span class="line">        <span class="variable language_">self</span>._right_drag = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication</span><br><span class="line">    <span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    <span class="comment"># app.setStyleSheet(open(&quot;./UnFrameStyle.qss&quot;).read())</span></span><br><span class="line">    window = QUnFrameWindow()</span><br><span class="line">    window.setCloseButton(<span class="literal">True</span>)</span><br><span class="line">    window.setMinMaxButtons(<span class="literal">True</span>)</span><br><span class="line">    window.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h2 id="第二"><a href="#第二" class="headerlink" title="第二"></a>第二</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt6.QtCore <span class="keyword">import</span> Qt, QPointF, QPoint</span><br><span class="line"><span class="keyword">from</span> PyQt6.QtWidgets <span class="keyword">import</span> QApplication, QMainWindow, QWidget</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span>(<span class="title class_ inherited__">QMainWindow</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 设置窗口无边框</span></span><br><span class="line">        <span class="variable language_">self</span>.setWindowFlags(Qt.WindowType.FramelessWindowHint)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 创建一个子窗口</span></span><br><span class="line">        <span class="variable language_">self</span>.widget = QWidget(<span class="variable language_">self</span>)</span><br><span class="line">        <span class="variable language_">self</span>.widget.setGeometry(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 设置子窗口背景颜色</span></span><br><span class="line">        <span class="variable language_">self</span>.widget.setStyleSheet(<span class="string">&quot;background-color: red;&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 记录鼠标按下时的坐标</span></span><br><span class="line">        <span class="variable language_">self</span>.mouse_pos = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mousePressEvent</span>(<span class="params">self, event</span>):</span><br><span class="line">        <span class="comment"># 鼠标按下时记录坐标</span></span><br><span class="line">        <span class="variable language_">self</span>.mouse_pos = event.globalPosition()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mouseMoveEvent</span>(<span class="params">self, event</span>):</span><br><span class="line">        <span class="comment"># 鼠标移动时计算移动距离</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.mouse_pos:</span><br><span class="line">            diff = event.globalPosition() - <span class="variable language_">self</span>.mouse_pos</span><br><span class="line">            <span class="variable language_">self</span>.move(<span class="variable language_">self</span>.pos() + diff.toPoint())</span><br><span class="line">            <span class="variable language_">self</span>.mouse_pos = event.globalPosition()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mouseReleaseEvent</span>(<span class="params">self, event</span>):</span><br><span class="line">        <span class="comment"># 鼠标释放时清空坐标</span></span><br><span class="line">        <span class="variable language_">self</span>.mouse_pos = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app = QApplication([])</span><br><span class="line">    window = MainWindow()</span><br><span class="line">    window.show()</span><br><span class="line">    app.<span class="built_in">exec</span>()</span><br></pre></td></tr></table></figure><h2 id="第三"><a href="#第三" class="headerlink" title="第三"></a>第三</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PySide6.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PySide6.QtGui <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PySide6.QtCore <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> ui <span class="keyword">import</span> ui_main_win</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 主窗口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">main_win</span>(<span class="title class_ inherited__">QWidget</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,parent = <span class="literal">None</span></span>):</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 从文件中加载UI定义</span></span><br><span class="line">        <span class="built_in">super</span>(main_win, <span class="variable language_">self</span>).__init__(parent)</span><br><span class="line">        <span class="variable language_">self</span>.ui = ui_main_win.Ui_Form()</span><br><span class="line">        <span class="variable language_">self</span>.ui.setupUi(<span class="variable language_">self</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.setWindowFlag(Qt.FramelessWindowHint)<span class="comment">#将界面设置为无框</span></span><br><span class="line">        <span class="variable language_">self</span>.setAttribute(Qt.WA_TranslucentBackground)<span class="comment">#将界面属性设置为半透明</span></span><br><span class="line">        <span class="variable language_">self</span>.shadow = QGraphicsDropShadowEffect()<span class="comment">#设定一个阴影,半径为 4,颜色为 2, 10, 25,偏移为 0,0</span></span><br><span class="line">        <span class="variable language_">self</span>.shadow.setBlurRadius(<span class="number">4</span>)</span><br><span class="line">        <span class="variable language_">self</span>.shadow.setColor(QColor(<span class="number">2</span>, <span class="number">10</span>, <span class="number">25</span>))</span><br><span class="line">        <span class="variable language_">self</span>.shadow.setOffset(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="variable language_">self</span>.ui.frame.setGraphicsEffect(<span class="variable language_">self</span>.shadow)<span class="comment">#为frame设定阴影效果</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#   --------------------------------------------------移动功能-------------------------------------------------</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mousePressEvent</span>(<span class="params">self, event</span>):<span class="comment">#鼠标左键按下时获取鼠标坐标</span></span><br><span class="line">        <span class="keyword">if</span> event.button() == Qt.LeftButton:</span><br><span class="line">            <span class="variable language_">self</span>._move_drag = <span class="literal">True</span></span><br><span class="line">            <span class="variable language_">self</span>.cursor_win_pos = event.globalPosition() - <span class="variable language_">self</span>.pos()</span><br><span class="line">            event.accept()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mouseMoveEvent</span>(<span class="params">self, event</span>):<span class="comment">#鼠标在按下左键的情况下移动时,根据坐标移动界面</span></span><br><span class="line">        <span class="comment"># 移动事件</span></span><br><span class="line">        <span class="keyword">if</span> Qt.LeftButton <span class="keyword">and</span> <span class="variable language_">self</span>._move_drag:</span><br><span class="line">            m_Point = event.globalPosition() - <span class="variable language_">self</span>.cursor_win_pos</span><br><span class="line">            <span class="variable language_">self</span>.move(m_Point.x() ,m_Point.y())</span><br><span class="line">            event.accept()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mouseReleaseEvent</span>(<span class="params">self, event</span>):<span class="comment">#鼠标按键释放时,取消移动</span></span><br><span class="line">        <span class="variable language_">self</span>._move_drag = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 每一个 PySide6 应用都必须创建一个应用对象</span></span><br><span class="line">app = QApplication([])</span><br><span class="line">main_win = main_win()</span><br><span class="line">main_win.show()</span><br><span class="line">sys.exit(app.<span class="built_in">exec</span>())</span><br></pre></td></tr></table></figure><h2 id="第四"><a href="#第四" class="headerlink" title="第四"></a>第四</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PySide6 <span class="keyword">import</span> QtGui</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> uis.frame_ui <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> icons_rc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span>(<span class="title class_ inherited__">QMainWindow</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        <span class="variable language_">self</span>.ui = Ui_MainWindow()</span><br><span class="line">        <span class="variable language_">self</span>.ui.setupUi(<span class="variable language_">self</span>)</span><br><span class="line">        <span class="comment"># 使模拟边框的3个按钮生效(关闭、最小化、最大化、双击标题框)</span></span><br><span class="line">        <span class="variable language_">self</span>.redefine_window_border_btn()</span><br><span class="line">        <span class="comment"># 设置无边框</span></span><br><span class="line">        <span class="variable language_">self</span>.setWindowFlag(Qt.Window | Qt.FramelessWindowHint | Qt.WindowSystemMenuHint</span><br><span class="line">                           | Qt.WindowMinimizeButtonHint| Qt.WindowMaximizeButtonHint)</span><br><span class="line">        <span class="variable language_">self</span>.centralWidget().layout().setContentsMargins(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="variable language_">self</span>.ui.window_title.setText(<span class="string">&quot;模板窗口V1.0&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">resize_maximize</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        最大化窗口</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.isMaximized():</span><br><span class="line">            <span class="variable language_">self</span>.showNormal()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>.showMaximized()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">double_clicked_border_bar</span>(<span class="params">self, event</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        双击顶部标题条,使其在最大化和还原之间切换</span></span><br><span class="line"><span class="string">        :param event:</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> event.button() == QtGui.Qt.MouseButton.LeftButton:</span><br><span class="line">            <span class="variable language_">self</span>.resize_maximize()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">move_title_bar</span>(<span class="params">self, event</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        拖动顶部标题条</span></span><br><span class="line"><span class="string">        :param event:</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.windowHandle().startSystemMove()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">redefine_window_border_btn</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        使模拟边框的3个按钮生效(关闭、最小化、最大化、双击标题框)</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.ui.btn_close.clicked.connect(<span class="variable language_">self</span>.close)  <span class="comment"># 关闭按钮</span></span><br><span class="line">        <span class="variable language_">self</span>.ui.btn_min.clicked.connect(<span class="variable language_">self</span>.showMinimized)  <span class="comment"># 最小化按钮</span></span><br><span class="line">        <span class="variable language_">self</span>.ui.btn_max.clicked.connect(<span class="variable language_">self</span>.resize_maximize)  <span class="comment"># 最大化按钮</span></span><br><span class="line">        <span class="comment"># 设置可拖动（通过拖动窗口上的横条来达到拖动窗口的效果）</span></span><br><span class="line">        <span class="variable language_">self</span>.ui.border_frame_mid.mouseDoubleClickEvent = <span class="variable language_">self</span>.double_clicked_border_bar</span><br><span class="line">        <span class="variable language_">self</span>.ui.border_frame_right.mouseDoubleClickEvent = <span class="variable language_">self</span>.double_clicked_border_bar</span><br><span class="line">        <span class="variable language_">self</span>.ui.border_frame_mid.mouseMoveEvent = <span class="variable language_">self</span>.move_title_bar</span><br><span class="line">        <span class="variable language_">self</span>.ui.border_frame_right.mouseMoveEvent = <span class="variable language_">self</span>.move_title_bar</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    window = MainWindow()</span><br><span class="line">    window.show()</span><br><span class="line">    sys.exit(app.<span class="built_in">exec</span>())</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;pyqt5-无边框界面&quot;&gt;&lt;a href=&quot;#pyqt5-无边框界面&quot; class=&quot;headerlink&quot; title=&quot;pyqt5 无边框界面&quot;&gt;&lt;/a&gt;pyqt5 无边框界面&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;tab</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>PyQt5窗口跟随其它窗口</title>
    <link href="https://veryxing.github.io/post/2018-10-23/PyQt5%E7%AA%97%E5%8F%A3%E8%B7%9F%E9%9A%8F%E5%85%B6%E5%AE%83%E7%AA%97%E5%8F%A3/"/>
    <id>https://veryxing.github.io/post/2018-10-23/PyQt5%E7%AA%97%E5%8F%A3%E8%B7%9F%E9%9A%8F%E5%85%B6%E5%AE%83%E7%AA%97%E5%8F%A3/</id>
    <published>2018-10-23T07:08:56.000Z</published>
    <updated>2024-10-13T18:09:41.106Z</updated>
    
    <content type="html"><![CDATA[<p>要实现<code>PyQt</code>窗口跟随其它外部的窗口，能想到两点办法，一个是hook系统事件得到目标窗口的位置和大小以及是否关闭等，二是通过循环检测窗口的位置来实现。</p><span id="more"></span><h2 id="基于Windows定时检测目标窗口"><a href="#基于Windows定时检测目标窗口" class="headerlink" title="基于Windows定时检测目标窗口"></a>基于Windows定时检测目标窗口</h2><ol><li>利用<code>win32gui</code>模块获取目标窗口的句柄</li><li>通过句柄获取目标窗口的大小位置，并设置自己的位置</li><li>主要是检测时间，在10毫秒以下很流畅</li><li>窗口关闭是根据目标句柄无效来判断</li></ol><p><a href="https://github.com/PyQt5/PyQt/blob/master/Demo/FollowWindow.py">https://github.com/PyQt5/PyQt/blob/master/Demo/FollowWindow.py</a></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Created on 2018年10月22日</span></span><br><span class="line"><span class="string">@author: Irony</span></span><br><span class="line"><span class="string">@site: https://github.com/892768447</span></span><br><span class="line"><span class="string">@email: 892768447@qq.com</span></span><br><span class="line"><span class="string">@file: FollowWindow</span></span><br><span class="line"><span class="string">@description: </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> QTimer</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QWidget, QVBoxLayout, QPushButton</span><br><span class="line"><span class="keyword">import</span> win32gui</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">__Author__ = <span class="string">&quot;&quot;&quot;By: Irony</span></span><br><span class="line"><span class="string">QQ: 892768447</span></span><br><span class="line"><span class="string">Email: 892768447@qq.com&quot;&quot;&quot;</span></span><br><span class="line">__Copyright__ = <span class="string">&quot;Copyright (c) 2018 Irony&quot;</span></span><br><span class="line">__Version__ = <span class="string">&quot;Version 1.0&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Window</span>(<span class="title class_ inherited__">QWidget</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>(Window, <span class="variable language_">self</span>).__init__(*args, **kwargs)</span><br><span class="line">        layout = QVBoxLayout(<span class="variable language_">self</span>)</span><br><span class="line">        layout.addWidget(QPushButton(<span class="string">&#x27;test&#x27;</span>, <span class="variable language_">self</span>))</span><br><span class="line">        <span class="variable language_">self</span>.tmpHwnd = <span class="literal">None</span></span><br><span class="line">        <span class="comment"># 启动定时器检测记事本的位置大小和是否关闭</span></span><br><span class="line">        <span class="variable language_">self</span>.checkTimer = QTimer(<span class="variable language_">self</span>, timeout=<span class="variable language_">self</span>.checkWindow)</span><br><span class="line">        <span class="variable language_">self</span>.checkTimer.start(<span class="number">10</span>)  <span class="comment"># 10毫秒比较流畅</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">checkWindow</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 查找</span></span><br><span class="line">        hwnd = win32gui.FindWindow(<span class="string">&#x27;Notepad&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.tmpHwnd <span class="keyword">and</span> <span class="keyword">not</span> hwnd:</span><br><span class="line">            <span class="comment"># 表示记事本关闭了</span></span><br><span class="line">            <span class="variable language_">self</span>.checkTimer.stop()</span><br><span class="line">            <span class="variable language_">self</span>.close()  <span class="comment"># 关闭自己</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> hwnd:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="variable language_">self</span>.tmpHwnd = hwnd</span><br><span class="line">        <span class="comment"># 获取位置</span></span><br><span class="line">        rect = win32gui.GetWindowRect(hwnd)</span><br><span class="line">        <span class="built_in">print</span>(rect)</span><br><span class="line">        <span class="variable language_">self</span>.move(rect[<span class="number">2</span>], rect[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">import</span> sys</span><br><span class="line">    <span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication</span><br><span class="line">    <span class="comment"># 先检测是否已有记事本打开</span></span><br><span class="line">    hwnd = win32gui.FindWindow(<span class="string">&#x27;Notepad&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;hwnd&#x27;</span>, hwnd)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> hwnd:</span><br><span class="line">        <span class="comment"># 启动记事本</span></span><br><span class="line">        os.startfile(<span class="string">&#x27;notepad&#x27;</span>)</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    w = Window()</span><br><span class="line">    w.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure><h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="/PyQt/Demo/ScreenShot/FollowWindow.gif" alt="FollowWindow"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;要实现&lt;code&gt;PyQt&lt;/code&gt;窗口跟随其它外部的窗口，能想到两点办法，一个是hook系统事件得到目标窗口的位置和大小以及是否关闭等，二是通过循环检测窗口的位置来实现。&lt;/p&gt;</summary>
    
    
    
    <category term="例子" scheme="https://veryxing.github.io/categories/%E4%BE%8B%E5%AD%90/"/>
    
    
    <category term="PyQt" scheme="https://veryxing.github.io/tags/PyQt/"/>
    
    <category term="窗口" scheme="https://veryxing.github.io/tags/%E7%AA%97%E5%8F%A3/"/>
    
  </entry>
  
</feed>
